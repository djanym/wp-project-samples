{"version":3,"sources":["infinite-scroll.pkgd.min.js"],"names":["window","factory","define","amd","jQuery","module","exports","require","jQueryBridget","arraySlice","Array","prototype","slice","console","logError","message","error","namespace","PluginClass","$","methodCall","$elems","methodName","args","returnValue","pluginMethodStr","each","i","elem","instance","data","method","charAt","value","apply","undefined","plainCall","options","option","_init","opts","isPlainObject","this","extend","fn","arg0","call","arguments","updateJQuery","bridget","global","EvEmitter","proto","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","off","length","index","splice","emitEvent","onceListeners","allOff","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","selector","fizzyUIUtils","utils","a","b","prop","modulo","num","div","makeArray","obj","isArray","removeFrom","ary","getParent","parentNode","document","body","getQueryElement","querySelector","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","attr","getAttribute","JSON","parse","className","InfiniteScroll","instances","element","queryElem","infiniteScrollGUID","defaults","$element","create","destroy","GUID","id","guid","pageIndex","loadCount","updateGetPath","getPath","updateGetAbsolutePath","log","callOnInit","onInit","dispatchEvent","emitArgs","$event","jQEvent","Event","trigger","loggers","initialized","request","path","load","response","title","append","items","last","history","origin","debug","logger","updateMeasurements","windowHeight","innerHeight","rect","getBoundingClientRect","top","pageYOffset","updateScroller","elementScroll","scroller","optPath","updateGetPathTemplate","updateGetPathSelector","nextIndex","bind","regexString","templateRe","RegExp","location","href","parseInt","pathRegexes","hrefElem","pathParts","regex","isPathSelector","getAbsolutePath","pathname","directory","substring","lastIndexOf","hideNav","nav","style","display","removeData","throttle","now","Date","setJQuery","getItemsFragment","fragment","createDocumentFragment","appendChild","copyAttributes","fromNode","toNode","attrs","attributes","setAttribute","name","loadOnScroll","checkLastPage","responseType","pageLoad","canLoad","onScrollThresholdLoad","outlayer","onAppendOutlayer","loadNextPage","isLoading","onLoad","onPageLoad","onError","onPageError","onLast","lastPageReached","url","req","XMLHttpRequest","open","setRequestHeader","onload","status","Error","statusText","onerror","send","appendNextPage","optAppend","appendReady","appendItems","appendOutlayerItems","scripts","script","freshScript","createElement","innerHTML","replaceChild","refreshScripts","imagesLoaded","appended","pathOpt","prefill","isPrefilling","stopPrefill","distance","getPrefillDistance","clientHeight","scrollHeight","scrollThreshold","scrollWatch","pageScrollHandler","onPageScroll","resizeHandler","onResize","enableScrollWatch","disableScrollWatch","isScrollWatching","bindScrollWatchEvents","isBind","addRemove","getBottomDistance","getElementBottomDistance","getWindowBottomDistance","scrollTop","link","protocol","host","createHistoryAppend","createHistoryPageLoad","scrollPages","scrollPageIndex","scrollHistoryHandler","onScrollHistory","unloadHandler","onUnload","onAppendHistory","bindHistoryAppendEvents","onPageLoadHistory","destroyHistory","firstItem","elemScrollY","getElementScrollY","getElementElementScrollY","getElementWindowScrollY","offsetTop","page","scrollViewY","getScrollViewY","scrollPage","setHistory","optHistory","historyTitle","scrollY","scrollTo","InfiniteScrollButton","infScroll","clickHandler","onClick","disable","enable","hide","button","buttonElem","preventDefault","removeAttribute","disabled","removeEventListener","Button","setDisplay","show","statusElem","statusElement","statusEventElements","showRequestStatus","showErrorStatus","showLastStatus","bindHideStatus","bindMethod","hideEvent","hideAllStatus","showStatus","hideStatusEventElements","ImagesLoaded","onAlways","elements","getImages","jqDeferred","Deferred","check","Object","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","img","children","child","1","9","11","LoadingImage","Background","Image","getComputedStyle","reURL","exec","backgroundImage","addBackground","loadingImage","onProgress","image","progress","progressedCount","hasAnyBroken","complete","isLoaded","notify","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","src","unbindEvents","makeJQueryPlugin","promise"],"mappings":"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","file":"infinite-scroll.pkgd.min.js","sourcesContent":["/*!\n * Infinite Scroll PACKAGED v3.0.6\n * Automatically add next page\n *\n * Licensed GPLv3 for open source use\n * or Infinite Scroll Commercial License for commercial use\n *\n * https://infinite-scroll.com\n * Copyright 2018 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.1\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\n      return factory( window, jQuery );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('jquery')\n    );\n  } else {\n    // browser global\n    window.jQueryBridget = factory(\n      window,\n      window.jQuery\n    );\n  }\n\n}( window, function factory( window, jQuery ) {\n'use strict';\n\n// ----- utils ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// helper function for logging errors\n// $.error breaks jQuery chaining\nvar console = window.console;\nvar logError = typeof console == 'undefined' ? function() {} :\n  function( message ) {\n    console.error( message );\n  };\n\n// ----- jQueryBridget ----- //\n\nfunction jQueryBridget( namespace, PluginClass, $ ) {\n  $ = $ || jQuery || window.jQuery;\n  if ( !$ ) {\n    return;\n  }\n\n  // add option method -> $().plugin('option', {...})\n  if ( !PluginClass.prototype.option ) {\n    // option setter\n    PluginClass.prototype.option = function( opts ) {\n      // bail out if not an object\n      if ( !$.isPlainObject( opts ) ){\n        return;\n      }\n      this.options = $.extend( true, this.options, opts );\n    };\n  }\n\n  // make jQuery plugin\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\n    if ( typeof arg0 == 'string' ) {\n      // method call $().plugin( 'methodName', { options } )\n      // shift arguments by 1\n      var args = arraySlice.call( arguments, 1 );\n      return methodCall( this, arg0, args );\n    }\n    // just $().plugin({ options })\n    plainCall( this, arg0 );\n    return this;\n  };\n\n  // $().plugin('methodName')\n  function methodCall( $elems, methodName, args ) {\n    var returnValue;\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n\n    $elems.each( function( i, elem ) {\n      // get instance\n      var instance = $.data( elem, namespace );\n      if ( !instance ) {\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\n          pluginMethodStr );\n        return;\n      }\n\n      var method = instance[ methodName ];\n      if ( !method || methodName.charAt(0) == '_' ) {\n        logError( pluginMethodStr + ' is not a valid method' );\n        return;\n      }\n\n      // apply method, get return value\n      var value = method.apply( instance, args );\n      // set return value if value is returned, use only first value\n      returnValue = returnValue === undefined ? value : returnValue;\n    });\n\n    return returnValue !== undefined ? returnValue : $elems;\n  }\n\n  function plainCall( $elems, options ) {\n    $elems.each( function( i, elem ) {\n      var instance = $.data( elem, namespace );\n      if ( instance ) {\n        // set options & init\n        instance.option( options );\n        instance._init();\n      } else {\n        // initialize new instance\n        instance = new PluginClass( elem, options );\n        $.data( elem, namespace, instance );\n      }\n    });\n  }\n\n  updateJQuery( $ );\n\n}\n\n// ----- updateJQuery ----- //\n\n// set $.bridget for v1 backwards compatibility\nfunction updateJQuery( $ ) {\n  if ( !$ || ( $ && $.bridget ) ) {\n    return;\n  }\n  $.bridget = jQueryBridget;\n}\n\nupdateJQuery( jQuery || window.jQuery );\n\n// -----  ----- //\n\nreturn jQueryBridget;\n\n}));\n\n/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n\n/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'desandro-matches-selector/matches-selector',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = window.Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n\n/**\n * Fizzy UI utils v2.0.7\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'fizzy-ui-utils/utils',[\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n  // return empty array if undefined or null. #6\n  if ( obj === null || obj === undefined ) {\n    return [];\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem.parentNode && elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  threshold = threshold || 100;\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    clearTimeout( timeout );\n\n    var args = arguments;\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  var readyState = document.readyState;\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\n    // do async to allow for other scripts to run. metafizzy/flickity#441\n    setTimeout( callback );\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('namespace')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n// core\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'infinite-scroll/js/core',[\n      'ev-emitter/ev-emitter',\n      'fizzy-ui-utils/utils',\n    ], function( EvEmitter, utils) {\n      return factory( window, EvEmitter, utils );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('fizzy-ui-utils')\n    );\n  } else {\n    // browser global\n    window.InfiniteScroll = factory(\n      window,\n      window.EvEmitter,\n      window.fizzyUIUtils\n    );\n  }\n\n}( window, function factory( window, EvEmitter, utils ) {\n\nvar jQuery = window.jQuery;\n// internal store of all InfiniteScroll intances\nvar instances = {};\n\nfunction InfiniteScroll( element, options ) {\n  var queryElem = utils.getQueryElement( element );\n\n  if ( !queryElem ) {\n    console.error( 'Bad element for InfiniteScroll: ' + ( queryElem || element ) );\n    return;\n  }\n  element = queryElem;\n  // do not initialize twice on same element\n  if ( element.infiniteScrollGUID ) {\n    var instance = instances[ element.infiniteScrollGUID ];\n    instance.option( options );\n    return instance;\n  }\n\n  this.element = element;\n  // options\n  this.options = utils.extend( {}, InfiniteScroll.defaults );\n  this.option( options );\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  this.create();\n}\n\n// defaults\nInfiniteScroll.defaults = {\n  // path: null,\n  // hideNav: null,\n  // debug: false,\n};\n\n// create & destroy methods\nInfiniteScroll.create = {};\nInfiniteScroll.destroy = {};\n\nvar proto = InfiniteScroll.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n// --------------------------  -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n\nproto.create = function() {\n  // create core\n  // add id for InfiniteScroll.data\n  var id = this.guid = ++GUID;\n  this.element.infiniteScrollGUID = id; // expando\n  instances[ id ] = this; // associate via id\n  // properties\n  this.pageIndex = 1; // default to first page\n  this.loadCount = 0;\n  this.updateGetPath();\n  // bail if getPath not set, or returns falsey #776\n  var hasPath = this.getPath && this.getPath();\n  if ( !hasPath ) {\n    console.error('Disabling InfiniteScroll');\n    return;\n  }\n  this.updateGetAbsolutePath();\n  this.log( 'initialized', [ this.element.className ] );\n  this.callOnInit();\n  // create features\n  for ( var method in InfiniteScroll.create ) {\n    InfiniteScroll.create[ method ].call( this );\n  }\n};\n\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n// call onInit option, used for binding events on init\nproto.callOnInit = function() {\n  var onInit = this.options.onInit;\n  if ( onInit ) {\n    onInit.call( this, this );\n  }\n};\n\n// ----- events ----- //\n\nproto.dispatchEvent = function( type, event, args ) {\n  this.log( type, args );\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n  // trigger jQuery event\n  if ( !jQuery || !this.$element ) {\n    return;\n  }\n  // namespace jQuery event\n  type += '.infiniteScroll';\n  var $event = type;\n  if ( event ) {\n    // create jQuery event\n    var jQEvent = jQuery.Event( event );\n    jQEvent.type = type;\n    $event = jQEvent;\n  }\n  this.$element.trigger( $event, args );\n};\n\nvar loggers = {\n  initialized: function( className ) {\n    return 'on ' + className;\n  },\n  request: function( path ) {\n    return 'URL: ' + path;\n  },\n  load: function( response, path ) {\n    return ( response.title || '' ) + '. URL: ' + path;\n  },\n  error: function( error, path ) {\n    return error + '. URL: ' + path;\n  },\n  append: function( response, path, items ) {\n    return items.length + ' items. URL: ' + path;\n  },\n  last: function( response, path ) {\n    return 'URL: ' + path;\n  },\n  history: function( title, path ) {\n    return 'URL: ' + path;\n  },\n  pageIndex: function( index, origin ) {\n    return 'current page determined to be: ' + index + ' from ' + origin;\n  },\n};\n\n// log events\nproto.log = function( type, args ) {\n  if ( !this.options.debug ) {\n    return;\n  }\n  var message = '[InfiniteScroll] ' + type;\n  var logger = loggers[ type ];\n  if ( logger ) {\n    message += '. ' + logger.apply( this, args );\n  }\n  console.log( message );\n};\n\n// -------------------------- methods used amoung features -------------------------- //\n\nproto.updateMeasurements = function() {\n  this.windowHeight = window.innerHeight;\n  var rect = this.element.getBoundingClientRect();\n  this.top = rect.top + window.pageYOffset;\n};\n\nproto.updateScroller = function() {\n  var elementScroll = this.options.elementScroll;\n  if ( !elementScroll ) {\n    // default, use window\n    this.scroller = window;\n    return;\n  }\n  // if true, set to element, otherwise use option\n  this.scroller = elementScroll === true ? this.element :\n    utils.getQueryElement( elementScroll );\n  if ( !this.scroller ) {\n    throw 'Unable to find elementScroll: ' + elementScroll;\n  }\n};\n\n// -------------------------- page path -------------------------- //\n\nproto.updateGetPath = function() {\n  var optPath = this.options.path;\n  if ( !optPath ) {\n    console.error( 'InfiniteScroll path option required. Set as: ' + optPath );\n    return;\n  }\n  // function\n  var type = typeof optPath;\n  if ( type == 'function' ) {\n    this.getPath = optPath;\n    return;\n  }\n  // template string: '/pages/{{#}}.html'\n  var templateMatch = type == 'string' && optPath.match('{{#}}');\n  if ( templateMatch ) {\n    this.updateGetPathTemplate( optPath );\n    return;\n  }\n  // selector: '.next-page-selector'\n  this.updateGetPathSelector( optPath );\n};\n\nproto.updateGetPathTemplate = function( optPath ) {\n  // set getPath with template string\n  this.getPath = function() {\n    var nextIndex = this.pageIndex + 1;\n    return optPath.replace( '{{#}}', nextIndex );\n  }.bind( this );\n  // get pageIndex from location\n  // convert path option into regex to look for pattern in location\n  // escape query (?) in url, allows for parsing GET parameters \n  var regexString = optPath\n    .replace( /(\\\\\\?|\\?)/, '\\\\?' )\n    .replace( '{{#}}', '(\\\\d\\\\d?\\\\d?)' );\n  var templateRe = new RegExp( regexString );\n  var match = location.href.match( templateRe );\n\n  if ( match ) {\n    this.pageIndex = parseInt( match[1], 10 );\n    this.log( 'pageIndex', [ this.pageIndex, 'template string' ] );\n  }\n};\n\nvar pathRegexes = [\n  // WordPress & Tumblr - example.com/page/2\n  // Jekyll - example.com/page2\n  /^(.*?\\/?page\\/?)(\\d\\d?\\d?)(.*?$)/,\n  // Drupal - example.com/?page=1\n  /^(.*?\\/?\\?page=)(\\d\\d?\\d?)(.*?$)/,\n  // catch all, last occurence of a number\n  /(.*?)(\\d\\d?\\d?)(?!.*\\d)(.*?$)/,\n];\n\nproto.updateGetPathSelector = function( optPath ) {\n  // parse href of link: '.next-page-link'\n  var hrefElem = document.querySelector( optPath );\n  if ( !hrefElem ) {\n    console.error( 'Bad InfiniteScroll path option. Next link not found: ' +\n      optPath );\n    return;\n  }\n  var href = hrefElem.getAttribute('href');\n  // try matching href to pathRegexes patterns\n  var pathParts, regex;\n  for ( var i=0; href && i < pathRegexes.length; i++ ) {\n    regex = pathRegexes[i];\n    var match = href.match( regex );\n    if ( match ) {\n      pathParts = match.slice(1); // remove first part\n      break;\n    }\n  }\n  if ( !pathParts ) {\n    console.error( 'InfiniteScroll unable to parse next link href: ' + href );\n    return;\n  }\n  this.isPathSelector = true; // flag for checkLastPage()\n  this.getPath = function() {\n    var nextIndex = this.pageIndex + 1;\n    return pathParts[0] + nextIndex + pathParts[2];\n  }.bind( this );\n  // get pageIndex from href\n  this.pageIndex = parseInt( pathParts[1], 10 ) - 1;\n  this.log( 'pageIndex', [ this.pageIndex, 'next link' ] );\n};\n\nproto.updateGetAbsolutePath = function() {\n  var path = this.getPath();\n  // path doesn't start with http or /\n  var isAbsolute = path.match( /^http/ ) || path.match( /^\\// );\n  if ( isAbsolute ) {\n    this.getAbsolutePath = this.getPath;\n    return;\n  }\n\n  var pathname = location.pathname;\n  // query parameter #829. example.com/?pg=2\n  var isQuery = path.match( /^\\?/ );\n  if ( isQuery ) {\n    this.getAbsolutePath = function() {\n      return pathname + this.getPath();\n    };\n    return;\n  }\n\n  // /foo/bar/index.html => /foo/bar\n  var directory = pathname.substring( 0, pathname.lastIndexOf('/') );\n  this.getAbsolutePath = function() {\n    return directory + '/' + this.getPath();\n  };\n};\n\n// -------------------------- nav -------------------------- //\n\n// hide navigation\nInfiniteScroll.create.hideNav = function() {\n  var nav = utils.getQueryElement( this.options.hideNav );\n  if ( !nav ) {\n    return;\n  }\n  nav.style.display = 'none';\n  this.nav = nav;\n};\n\nInfiniteScroll.destroy.hideNav = function() {\n  if ( this.nav ) {\n    this.nav.style.display = '';\n  }\n};\n\n// -------------------------- destroy -------------------------- //\n\nproto.destroy = function() {\n  this.allOff(); // remove all event listeners\n  // call destroy methods\n  for ( var method in InfiniteScroll.destroy ) {\n    InfiniteScroll.destroy[ method ].call( this );\n  }\n\n  delete this.element.infiniteScrollGUID;\n  delete instances[ this.guid ];\n  // remove jQuery data. #807\n  if ( jQuery && this.$element ) {\n    jQuery.removeData( this.element, 'infiniteScroll' );\n  }\n};\n\n// -------------------------- utilities -------------------------- //\n\n// https://remysharp.com/2010/07/21/throttling-function-calls\nInfiniteScroll.throttle = function( fn, threshold ) {\n  threshold = threshold || 200;\n  var last, timeout;\n\n  return function() {\n    var now = +new Date();\n    var args = arguments;\n    var trigger = function() {\n      last = now;\n      fn.apply( this, args );\n    }.bind( this );\n    if ( last && now < last + threshold ) {\n      // hold on to it\n      clearTimeout( timeout );\n      timeout = setTimeout( trigger, threshold );\n    } else {\n      trigger();\n    }\n  };\n};\n\nInfiniteScroll.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.infiniteScrollGUID;\n  return id && instances[ id ];\n};\n\n// set internal jQuery, for Webpack + jQuery v3\nInfiniteScroll.setJQuery = function( $ ) {\n  jQuery = $;\n};\n\n// -------------------------- setup -------------------------- //\n\nutils.htmlInit( InfiniteScroll, 'infinite-scroll' );\n\n// add noop _init method for jQuery Bridget. #768\nproto._init = function() {};\n\nif ( jQuery && jQuery.bridget ) {\n  jQuery.bridget( 'infiniteScroll', InfiniteScroll );\n}\n\n// --------------------------  -------------------------- //\n\nreturn InfiniteScroll;\n\n}));\n\n// page-load\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'infinite-scroll/js/page-load',[\n      './core',\n    ], function( InfiniteScroll ) {\n      return factory( window, InfiniteScroll );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('./core')\n    );\n  } else {\n    // browser global\n    factory(\n      window,\n      window.InfiniteScroll\n    );\n  }\n\n}( window, function factory( window, InfiniteScroll ) {\n\nvar proto = InfiniteScroll.prototype;\n\n// InfiniteScroll.defaults.append = false;\nInfiniteScroll.defaults.loadOnScroll = true;\nInfiniteScroll.defaults.checkLastPage = true;\nInfiniteScroll.defaults.responseType = 'document';\n// InfiniteScroll.defaults.prefill = false;\n// InfiniteScroll.defaults.outlayer = null;\n\nInfiniteScroll.create.pageLoad = function() {\n  this.canLoad = true;\n  this.on( 'scrollThreshold', this.onScrollThresholdLoad );\n  this.on( 'load', this.checkLastPage );\n  if ( this.options.outlayer ) {\n    this.on( 'append', this.onAppendOutlayer );\n  }\n};\n\nproto.onScrollThresholdLoad = function() {\n  if ( this.options.loadOnScroll ) {\n    this.loadNextPage();\n  }\n};\n\nproto.loadNextPage = function() {\n  if ( this.isLoading || !this.canLoad ) {\n    return;\n  }\n\n  var path = this.getAbsolutePath();\n  this.isLoading = true;\n\n  var onLoad = function( response ) {\n    this.onPageLoad( response, path );\n  }.bind( this );\n\n  var onError = function( error ) {\n    this.onPageError( error, path );\n  }.bind( this );\n\n  var onLast = function( response ) {\n    this.lastPageReached( response, path );\n  }.bind( this );\n\n  request( path, this.options.responseType, onLoad, onError, onLast );\n  this.dispatchEvent( 'request', null, [ path ] );\n};\n\nproto.onPageLoad = function( response, path ) {\n  // done loading if not appending\n  if ( !this.options.append ) {\n    this.isLoading = false;\n  }\n  this.pageIndex++;\n  this.loadCount++;\n  this.dispatchEvent( 'load', null, [ response, path ] );\n  this.appendNextPage( response, path );\n  return response;\n};\n\nproto.appendNextPage = function( response, path ) {\n  var optAppend = this.options.append;\n  // do not append json\n  var isDocument = this.options.responseType == 'document';\n  if ( !isDocument || !optAppend ) {\n    return;\n  }\n\n  var items = response.querySelectorAll( optAppend );\n  var fragment = getItemsFragment( items );\n  var appendReady = function () {\n    this.appendItems( items, fragment );\n    this.isLoading = false;\n    this.dispatchEvent( 'append', null, [ response, path, items ] );\n  }.bind( this );\n\n  // TODO add hook for option to trigger appendReady\n  if ( this.options.outlayer ) {\n    this.appendOutlayerItems( fragment, appendReady );\n  } else {\n    appendReady();\n  }\n};\n\nproto.appendItems = function( items, fragment ) {\n  if ( !items || !items.length ) {\n    return;\n  }\n  // get fragment if not provided\n  fragment = fragment || getItemsFragment( items );\n  refreshScripts( fragment );\n  this.element.appendChild( fragment );\n};\n\nfunction getItemsFragment( items ) {\n  // add items to fragment\n  var fragment = document.createDocumentFragment();\n  for ( var i=0; items && i < items.length; i++ ) {\n    fragment.appendChild( items[i] );\n  }\n  return fragment;\n}\n\n// replace <script>s with copies so they load\n// <script>s added by InfiniteScroll will not load\n// similar to https://stackoverflow.com/questions/610995\nfunction refreshScripts( fragment ) {\n  var scripts = fragment.querySelectorAll('script');\n  for ( var i=0; i < scripts.length; i++ ) {\n    var script = scripts[i];\n    var freshScript = document.createElement('script');\n    copyAttributes( script, freshScript );\n    // copy inner script code. #718, #782\n    freshScript.innerHTML = script.innerHTML;\n    script.parentNode.replaceChild( freshScript, script );\n  }\n}\n\nfunction copyAttributes( fromNode, toNode ) {\n  var attrs = fromNode.attributes;\n  for ( var i=0; i < attrs.length; i++ ) {\n    var attr = attrs[i];\n    toNode.setAttribute( attr.name, attr.value );\n  }\n}\n\n// ----- outlayer ----- //\n\nproto.appendOutlayerItems = function( fragment, appendReady ) {\n  var imagesLoaded = InfiniteScroll.imagesLoaded || window.imagesLoaded;\n  if ( !imagesLoaded ) {\n    console.error('[InfiniteScroll] imagesLoaded required for outlayer option');\n    this.isLoading = false;\n    return;\n  }\n  // append once images loaded\n  imagesLoaded( fragment, appendReady );\n};\n\nproto.onAppendOutlayer = function( response, path, items ) {\n  this.options.outlayer.appended( items );\n};\n\n// ----- checkLastPage ----- //\n\n// check response for next element\nproto.checkLastPage = function( response, path ) {\n  var checkLastPage = this.options.checkLastPage;\n  if ( !checkLastPage ) {\n    return;\n  }\n\n  var pathOpt = this.options.path;\n  // if path is function, check if next path is truthy\n  if ( typeof pathOpt == 'function' ) {\n    var nextPath = this.getPath();\n    if ( !nextPath ) {\n      this.lastPageReached( response, path );\n      return;\n    }\n  }\n  // get selector from checkLastPage or path option\n  var selector;\n  if ( typeof checkLastPage == 'string' ) {\n    selector = checkLastPage;\n  } else if ( this.isPathSelector ) {\n    // path option is selector string\n    selector = pathOpt;\n  }\n  // check last page for selector\n  // bail if no selector or not document response\n  if ( !selector || !response.querySelector ) {\n    return;\n  }\n  // check if response has selector\n  var nextElem = response.querySelector( selector );\n  if ( !nextElem ) {\n    this.lastPageReached( response, path );\n  }\n};\n\nproto.lastPageReached = function( response, path ) {\n  this.canLoad = false;\n  this.dispatchEvent( 'last', null, [ response, path ] );\n};\n\n// ----- error ----- //\n\nproto.onPageError = function( error, path ) {\n  this.isLoading = false;\n  this.canLoad = false;\n  this.dispatchEvent( 'error', null, [ error, path ] );\n  return error;\n};\n\n// -------------------------- prefill -------------------------- //\n\nInfiniteScroll.create.prefill = function() {\n  if ( !this.options.prefill ) {\n    return;\n  }\n  var append = this.options.append;\n  if ( !append ) {\n    console.error( 'append option required for prefill. Set as :' + append );\n    return;\n  }\n  this.updateMeasurements();\n  this.updateScroller();\n  this.isPrefilling = true;\n  this.on( 'append', this.prefill );\n  this.once( 'error', this.stopPrefill );\n  this.once( 'last', this.stopPrefill );\n  this.prefill();\n};\n\nproto.prefill = function() {\n  var distance = this.getPrefillDistance();\n  this.isPrefilling = distance >= 0;\n  if ( this.isPrefilling ) {\n    this.log('prefill');\n    this.loadNextPage();\n  } else {\n    this.stopPrefill();\n  }\n};\n\nproto.getPrefillDistance = function() {\n  // element scroll\n  if ( this.options.elementScroll ) {\n    return this.scroller.clientHeight - this.scroller.scrollHeight;\n  }\n  // window\n  return this.windowHeight - this.element.clientHeight;\n};\n\nproto.stopPrefill = function() {\n  this.log('stopPrefill');\n  this.off( 'append', this.prefill );\n};\n\n// -------------------------- request -------------------------- //\n\nfunction request( url, responseType, onLoad, onError, onLast ) {\n  var req = new XMLHttpRequest();\n  req.open( 'GET', url, true );\n  // set responseType document to return DOM\n  req.responseType = responseType || '';\n\n  // set X-Requested-With header to check that is ajax request\n  req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n  req.onload = function() {\n    if ( req.status == 200 ) {\n      onLoad( req.response );\n    } else if ( req.status == 204 ) {\n      onLast( req.response );\n    } else {\n      // not 200 OK, error\n      var error = new Error( req.statusText );\n      onError( error );\n    }\n  };\n\n  // Handle network errors\n  req.onerror = function() {\n    var error = new Error( 'Network error requesting ' + url );\n    onError( error );\n  };\n\n  req.send();\n}\n\n// --------------------------  -------------------------- //\n\nreturn InfiniteScroll;\n\n}));\n\n// scroll-watch\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'infinite-scroll/js/scroll-watch',[\n      './core',\n      'fizzy-ui-utils/utils',\n    ], function( InfiniteScroll, utils ) {\n      return factory( window, InfiniteScroll, utils );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('./core'),\n      require('fizzy-ui-utils')\n    );\n  } else {\n    // browser global\n    factory(\n      window,\n      window.InfiniteScroll,\n      window.fizzyUIUtils\n    );\n  }\n\n}( window, function factory( window, InfiniteScroll, utils ) {\n\nvar proto = InfiniteScroll.prototype;\n\n// default options\nInfiniteScroll.defaults.scrollThreshold = 400;\n// InfiniteScroll.defaults.elementScroll = null;\n\nInfiniteScroll.create.scrollWatch = function() {\n  // events\n  this.pageScrollHandler = this.onPageScroll.bind( this );\n  this.resizeHandler = this.onResize.bind( this );\n\n  var scrollThreshold = this.options.scrollThreshold;\n  var isEnable = scrollThreshold || scrollThreshold === 0;\n  if ( isEnable ) {\n    this.enableScrollWatch();\n  }\n};\n\nInfiniteScroll.destroy.scrollWatch = function() {\n  this.disableScrollWatch();\n};\n\nproto.enableScrollWatch = function() {\n  if ( this.isScrollWatching ) {\n    return;\n  }\n  this.isScrollWatching = true;\n  this.updateMeasurements();\n  this.updateScroller();\n  // TODO disable after error?\n  this.on( 'last', this.disableScrollWatch );\n  this.bindScrollWatchEvents( true );\n};\n\nproto.disableScrollWatch = function() {\n  if ( !this.isScrollWatching ) {\n    return;\n  }\n  this.bindScrollWatchEvents( false );\n  delete this.isScrollWatching;\n};\n\nproto.bindScrollWatchEvents = function( isBind ) {\n  var addRemove = isBind ? 'addEventListener' : 'removeEventListener';\n  this.scroller[ addRemove ]( 'scroll', this.pageScrollHandler );\n  window[ addRemove ]( 'resize', this.resizeHandler );\n};\n\nproto.onPageScroll = InfiniteScroll.throttle( function() {\n  var distance = this.getBottomDistance();\n  if ( distance <= this.options.scrollThreshold ) {\n    this.dispatchEvent('scrollThreshold');\n  }\n});\n\nproto.getBottomDistance = function() {\n  if ( this.options.elementScroll ) {\n    return this.getElementBottomDistance();\n  } else {\n    return this.getWindowBottomDistance();\n  }\n};\n\nproto.getWindowBottomDistance = function() {\n  var bottom = this.top + this.element.clientHeight;\n  var scrollY = window.pageYOffset + this.windowHeight;\n  return bottom - scrollY;\n};\n\nproto.getElementBottomDistance = function() {\n  var bottom = this.scroller.scrollHeight;\n  var scrollY = this.scroller.scrollTop + this.scroller.clientHeight;\n  return bottom - scrollY;\n};\n\nproto.onResize = function() {\n  this.updateMeasurements();\n};\n\nutils.debounceMethod( InfiniteScroll, 'onResize', 150 );\n\n// --------------------------  -------------------------- //\n\nreturn InfiniteScroll;\n\n}));\n\n// history\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'infinite-scroll/js/history',[\n      './core',\n      'fizzy-ui-utils/utils',\n    ], function( InfiniteScroll, utils ) {\n      return factory( window, InfiniteScroll, utils );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('./core'),\n      require('fizzy-ui-utils')\n    );\n  } else {\n    // browser global\n    factory(\n      window,\n      window.InfiniteScroll,\n      window.fizzyUIUtils\n    );\n  }\n\n}( window, function factory( window, InfiniteScroll, utils ) {\n\nvar proto = InfiniteScroll.prototype;\n\nInfiniteScroll.defaults.history = 'replace';\n// InfiniteScroll.defaults.historyTitle = false;\n\nvar link = document.createElement('a');\n\n// ----- create/destroy ----- //\n\nInfiniteScroll.create.history = function() {\n  if ( !this.options.history ) {\n    return;\n  }\n  // check for same origin\n  link.href = this.getAbsolutePath();\n  // MS Edge does not have origin on link https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12236493/\n  var linkOrigin = link.origin || link.protocol + '//' + link.host;\n  var isSameOrigin = linkOrigin == location.origin;\n  if ( !isSameOrigin ) {\n    console.error( '[InfiniteScroll] cannot set history with different origin: ' +\n      link.origin + ' on ' + location.origin +\n      ' . History behavior disabled.' );\n    return;\n  }\n\n  // two ways to handle changing history\n  if ( this.options.append ) {\n    this.createHistoryAppend();\n  } else {\n    this.createHistoryPageLoad();\n  }\n};\n\nproto.createHistoryAppend = function() {\n  this.updateMeasurements();\n  this.updateScroller();\n  // array of scroll positions of appended pages\n  this.scrollPages = [\n    {\n      // first page\n      top: 0,\n      path: location.href,\n      title: document.title,\n    }\n  ];\n  this.scrollPageIndex = 0;\n  // events\n  this.scrollHistoryHandler = this.onScrollHistory.bind( this );\n  this.unloadHandler = this.onUnload.bind( this );\n  this.scroller.addEventListener( 'scroll', this.scrollHistoryHandler );\n  this.on( 'append', this.onAppendHistory );\n  this.bindHistoryAppendEvents( true );\n};\n\nproto.bindHistoryAppendEvents = function( isBind ) {\n  var addRemove = isBind ? 'addEventListener' : 'removeEventListener';\n  this.scroller[ addRemove ]( 'scroll', this.scrollHistoryHandler );\n  window[ addRemove ]( 'unload', this.unloadHandler );\n};\n\nproto.createHistoryPageLoad = function() {\n  this.on( 'load', this.onPageLoadHistory );\n};\n\nInfiniteScroll.destroy.history =\nproto.destroyHistory = function() {\n  var isHistoryAppend = this.options.history && this.options.append;\n  if ( isHistoryAppend ) {\n    this.bindHistoryAppendEvents( false );\n  }\n};\n\n// ----- append history ----- //\n\nproto.onAppendHistory = function( response, path, items ) {\n  // do not proceed if no items. #779\n  if ( !items || !items.length ) {\n    return;\n  }\n  var firstItem = items[0];\n  var elemScrollY = this.getElementScrollY( firstItem );\n  // resolve path\n  link.href = path;\n  // add page data to hash\n  this.scrollPages.push({\n    top: elemScrollY,\n    path: link.href,\n    title: response.title,\n  });\n};\n\nproto.getElementScrollY = function( elem ) {\n  if ( this.options.elementScroll ) {\n    return this.getElementElementScrollY( elem );\n  } else {\n    return this.getElementWindowScrollY( elem );\n  }\n};\n\nproto.getElementWindowScrollY = function( elem ) {\n  var rect = elem.getBoundingClientRect();\n  return rect.top + window.pageYOffset;\n};\n\n// wow, stupid name\nproto.getElementElementScrollY = function( elem ) {\n  return elem.offsetTop - this.top;\n};\n\nproto.onScrollHistory = function() {\n  // cycle through positions, find biggest without going over\n  var scrollViewY = this.getScrollViewY();\n  var pageIndex, page;\n  for ( var i=0; i < this.scrollPages.length; i++ ) {\n    var scrollPage = this.scrollPages[i];\n    if ( scrollPage.top >= scrollViewY ) {\n      break;\n    }\n    pageIndex = i;\n    page = scrollPage;\n  }\n  // set history if changed\n  if ( pageIndex != this.scrollPageIndex ) {\n    this.scrollPageIndex = pageIndex;\n    this.setHistory( page.title, page.path );\n  }\n};\n\nutils.debounceMethod( InfiniteScroll, 'onScrollHistory', 150 );\n\nproto.getScrollViewY = function() {\n  if ( this.options.elementScroll ) {\n    return this.scroller.scrollTop + this.scroller.clientHeight/2;\n  } else {\n    return window.pageYOffset + this.windowHeight/2;\n  }\n};\n\nproto.setHistory = function( title, path ) {\n  var optHistory = this.options.history;\n  var historyMethod = optHistory && history[ optHistory + 'State' ];\n  if ( !historyMethod ) {\n    return;\n  }\n\n  history[ optHistory + 'State' ]( null, title, path );\n\n  if ( this.options.historyTitle ) {\n    document.title = title;\n  }\n\n  this.dispatchEvent( 'history', null, [ title, path ] );\n};\n\n// scroll to top to prevent initial scroll-reset after page refresh\n// https://stackoverflow.com/a/18633915/182183\nproto.onUnload = function() {\n  var pageIndex = this.scrollPageIndex;\n  if ( pageIndex === 0 ) {\n    return;\n  }\n  // calculate where scroll position would be on refresh\n  var scrollPage = this.scrollPages[ pageIndex ];\n  var scrollY = window.pageYOffset - scrollPage.top + this.top;\n  // disable scroll event before setting scroll #679\n  this.destroyHistory();\n  scrollTo( 0, scrollY );\n};\n\n// ----- load history ----- //\n\n// update URL\nproto.onPageLoadHistory = function( response, path ) {\n  this.setHistory( response.title, path );\n};\n\n// --------------------------  -------------------------- //\n\nreturn InfiniteScroll;\n\n}));\n\n// button\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'infinite-scroll/js/button',[\n      './core',\n      'fizzy-ui-utils/utils',\n    ], function( InfiniteScroll, utils ) {\n      return factory( window, InfiniteScroll, utils );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('./core'),\n      require('fizzy-ui-utils')\n    );\n  } else {\n    // browser global\n    factory(\n      window,\n      window.InfiniteScroll,\n      window.fizzyUIUtils\n    );\n  }\n\n}( window, function factory( window, InfiniteScroll, utils ) {\n\n// InfiniteScroll.defaults.button = null;\n\nInfiniteScroll.create.button = function() {\n  var buttonElem = utils.getQueryElement( this.options.button );\n  if ( buttonElem ) {\n    this.button = new InfiniteScrollButton( buttonElem, this );\n    return;\n  }\n};\n\nInfiniteScroll.destroy.button = function() {\n  if ( this.button ) {\n    this.button.destroy();\n  }\n};\n\n// -------------------------- InfiniteScrollButton -------------------------- //\n\nfunction InfiniteScrollButton( element, infScroll ) {\n  this.element = element;\n  this.infScroll = infScroll;\n  // events\n  this.clickHandler = this.onClick.bind( this );\n  this.element.addEventListener( 'click', this.clickHandler );\n  infScroll.on( 'request', this.disable.bind( this ) );\n  infScroll.on( 'load', this.enable.bind( this ) );\n  infScroll.on( 'error', this.hide.bind( this ) );\n  infScroll.on( 'last', this.hide.bind( this ) );\n}\n\nInfiniteScrollButton.prototype.onClick = function( event ) {\n  event.preventDefault();\n  this.infScroll.loadNextPage();\n};\n\nInfiniteScrollButton.prototype.enable = function() {\n  this.element.removeAttribute('disabled');\n};\n\nInfiniteScrollButton.prototype.disable = function() {\n  this.element.disabled = 'disabled';\n};\n\nInfiniteScrollButton.prototype.hide = function() {\n  this.element.style.display = 'none';\n};\n\nInfiniteScrollButton.prototype.destroy = function() {\n  this.element.removeEventListener( 'click', this.clickHandler );\n};\n\n// --------------------------  -------------------------- //\n\nInfiniteScroll.Button = InfiniteScrollButton;\n\nreturn InfiniteScroll;\n\n}));\n\n// status\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'infinite-scroll/js/status',[\n      './core',\n      'fizzy-ui-utils/utils',\n    ], function( InfiniteScroll, utils ) {\n      return factory( window, InfiniteScroll, utils );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('./core'),\n      require('fizzy-ui-utils')\n    );\n  } else {\n    // browser global\n    factory(\n      window,\n      window.InfiniteScroll,\n      window.fizzyUIUtils\n    );\n  }\n\n}( window, function factory( window, InfiniteScroll, utils ) { \n\nvar proto = InfiniteScroll.prototype;\n\n// InfiniteScroll.defaults.status = null;\n\nInfiniteScroll.create.status = function() {\n  var statusElem = utils.getQueryElement( this.options.status );\n  if ( !statusElem ) {\n    return;\n  }\n  // elements\n  this.statusElement = statusElem;\n  this.statusEventElements = {\n    request: statusElem.querySelector('.infinite-scroll-request'),\n    error: statusElem.querySelector('.infinite-scroll-error'),\n    last: statusElem.querySelector('.infinite-scroll-last'),\n  };\n  // events\n  this.on( 'request', this.showRequestStatus );\n  this.on( 'error', this.showErrorStatus );\n  this.on( 'last', this.showLastStatus );\n  this.bindHideStatus('on');\n};\n\nproto.bindHideStatus = function( bindMethod ) {\n  var hideEvent = this.options.append ? 'append' : 'load';\n  this[ bindMethod ]( hideEvent, this.hideAllStatus );\n};\n\nproto.showRequestStatus = function() {\n  this.showStatus('request');\n};\n\nproto.showErrorStatus = function() {\n  this.showStatus('error');\n};\n\nproto.showLastStatus = function() {\n  this.showStatus('last');\n  // prevent last then append event race condition from showing last status #706\n  this.bindHideStatus('off');\n};\n\nproto.showStatus = function( eventName ) {\n  show( this.statusElement );\n  this.hideStatusEventElements();\n  var eventElem = this.statusEventElements[ eventName ];\n  show( eventElem );\n};\n\nproto.hideAllStatus = function() {\n  hide( this.statusElement );\n  this.hideStatusEventElements();\n};\n\nproto.hideStatusEventElements = function() {\n  for ( var type in this.statusEventElements ) {\n    var eventElem = this.statusEventElements[ type ];\n    hide( eventElem );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction hide( elem ) {\n  setDisplay( elem, 'none' );\n}\n\nfunction show( elem ) {\n  setDisplay( elem, 'block' );\n}\n\nfunction setDisplay( elem, value ) {\n  if ( elem ) {\n    elem.style.display = value;\n  }\n}\n\n// --------------------------  -------------------------- //\n\nreturn InfiniteScroll;\n\n}));\n\n/*!\n * Infinite Scroll v3.0.6\n * Automatically add next page\n *\n * Licensed GPLv3 for open source use\n * or Infinite Scroll Commercial License for commercial use\n *\n * https://infinite-scroll.com\n * Copyright 2018 Metafizzy\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'infinite-scroll/js/core',\n      'infinite-scroll/js/page-load',\n      'infinite-scroll/js/scroll-watch',\n      'infinite-scroll/js/history',\n      'infinite-scroll/js/button',\n      'infinite-scroll/js/status',\n    ], factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('./core'),\n      require('./page-load'),\n      require('./scroll-watch'),\n      require('./history'),\n      require('./button'),\n      require('./status')\n    );\n  }\n\n})( window, function factory( InfiniteScroll ) {\n  return InfiniteScroll;\n});\n\n/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'imagesloaded/imagesloaded',[\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});"]}